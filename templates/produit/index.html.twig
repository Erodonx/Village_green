{% extends 'base.html.twig' %}
{% block body %}
         
<div class="container">
    <h2 class="pt-3">Nos produits</h2>
<div class="btn-group col-auto d-flex">
                <button class="btn btn-sm dropdown-toggle" type="button" id="filterDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                    <p>Filtre</p>
                </button>
                <ul class="dropdown-menu" aria-labelledby="filterDropdown">
                    <li><a class="dropdown-item" href="{{ path('app_produit', { 'sort': 'price_asc' }) }}">Prix (asc)</a></li>
                    <li><a class="dropdown-item" href="{{ path('app_produit', { 'sort': 'price_desc' }) }}">Prix (desc)</a></li>
                    <li><a class="dropdown-item" href="{{ path('app_produit', { 'sort': 'alphabetical_asc' }) }}">Alphabétique (A-Z)</a></li>
                    <li><a class="dropdown-item" href="{{ path('app_produit', { 'sort': 'alphabetical_desc' }) }}">Alphabétique (Z-A)</a></li>
                    <li><a class="dropdown-item" href="{{ path('app_produit', { 'sort': 'popularity' }) }}">Les plus populaires</a></li>
                </ul>
            </div>
    <div class="row pt-3">
    {% set n = 1 %}
    {% for produit in produits %}
    {% if total % 3 == 2 %}
    {% if (total - n) == 1 or (total - n) == 0 %}
    <div class="row pt-3 d-lg-none">
    </div>
    <div class ="col-lg-1"></div>
        <div class="col-lg-5 card bg-white">
        <div class="card-body">
        <div class="row"><img src="/images/produits/{{produit.image}}" alt="Product_image">
        </div>
        <div class="row">
            <h5 class="card-title">
                <a href="{{ path('app_produit_show', {id: produit.id, slug: produit.slug}) }}">{{produit.nom}}</a>
            </h5>
        <p class="card-text text-dark">{{produit.description}}</p>
        <div class="text-primary" style="font-weight: bold; font-size: 2rem;">{{produit.formattedPrice}} € </div>
        </div>
    </div>
    </div>
    {% else %}
        <div class="row pt-3 d-lg-none">
        </div>
        <div class ="col-lg-1 pt-lg-3"></div>
        <div class="col-lg-3 card bg-white">
        <div class="card-body">
        <div class="row"><img src="/images/produits/{{produit.image}}" alt="Product_image">
        </div>
        <div class="row">
            <h5 class="card-title">
                <a href="{{ path('app_produit_show', {id: produit.id, slug: produit.slug}) }}">{{produit.nom}}</a>
            </h5>
        <p class="card-text text-dark">{{produit.description}}</p>
        <div class="text-primary" style="font-weight: bold; font-size: 2rem;">{{produit.formattedPrice}} € </div>
        </div>
    </div>
    </div>
    {% endif %}
    {% endif %}
    {% if total % 3 == 1 %}
    {% if (total - n) == 0 %}
        <div class="row pt-3 d-lg-none">
        </div>
        <div class ="col-lg-2 pt-lg-3"></div>
        <div class="col-lg-9 card bg-white">
        <div class="card-body">
        <div class="row"><img src="/images/produits/{{produit.image}}" alt="Product_image">
        </div>
        <div class="row">
            <h5 class="card-title">
                <a href="{{ path('app_produit_show', {id: produit.id, slug: produit.slug}) }}">{{produit.nom}}</a>
            </h5>
        <p class="card-text text-dark">{{produit.description}}</p>
        <div class="text-primary" style="font-weight: bold; font-size: 2rem;">{{produit.formattedPrice}} € </div>
        </div>
    </div>
    </div>
    <div class="col-lg-1"></div>
    {% else %}
        <div class="row pt-3 d-lg-none">
        </div>
        <div class ="col-lg-1 pt-lg-3"></div>
        <div class="col-lg-3 card bg-white">
        <div class="card-body">
        <div class="row"><img src="/images/produits/{{produit.image}}" alt="Product_image">
        </div>
        <div class="row">
            <h5 class="card-title">
                <a href="{{ path('app_produit_show', {id: produit.id, slug: produit.slug}) }}">{{produit.nom}}</a>
            </h5>
        <p class="card-text text-dark">{{produit.description}}</p>
        <div class="text-primary" style="font-weight: bold; font-size: 2rem;">{{produit.formattedPrice}} € </div>
        </div>
    </div>
    </div>
    {% endif %}
    {% endif %}
    {% if total % 3 == 0 %}
        <div class="row pt-3 d-lg-none">
        </div>
        <div class ="col-lg-1 pt-lg-3"></div>
        <div class="col-lg-3 card bg-white">
        <div class="card-body">
        <div class="row"><img src="/images/produits/{{produit.image}}" alt="Product_image">
        </div>
        <div class="row">
            <h5 class="card-title">
                <a href="{{ path('app_produit_show', {id: produit.id, slug: produit.slug}) }}">{{produit.nom}}</a>
            </h5>
        <p class="card-text text-dark">{{produit.description}}</p>
        <div class="text-primary" style="font-weight: bold; font-size: 2rem;">{{produit.formattedPrice}} € </div>
        </div>
    </div>
    </div>
    {% endif %}
    {% if n % 3 == 0 %}
    </div>
    <div class="row pt-3 ">
    {% endif %}
    {% set n = n + 1 %}
    {% endfor %}
    </div>
{% endblock %}
        {% block javascripts %}{% endblock %}
